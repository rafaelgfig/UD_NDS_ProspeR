Explorando e resumindo dados de empréstimos da Prosper por Rafael G. Figueira
========================================================

```{r echo=FALSE, message=FALSE, warning=FALSE, packages}
# Carregamento das bibliotécas
library(dplyr)
library(gridExtra)
library(ggplot2)
library(tidyr)
library(purrr)
```

```{r echo=FALSE, Load_the_Data}
# Carregamento dos dados
df <- read.csv('prosperLoanData.csv')
```

# Seção de Gráficos Univariados
```{r echo=FALSE, Univariate_Plots}
# Dimensão dos dados originais
dim(df)
```
```{r echo=FALSE, Univariate_Plots}
# Selecionando algumas colunas de interesse
dff <- (subset(df, select = c('LoanKey',
                              'Term',
                              'LoanStatus',
                              'BorrowerAPR',
                              'BorrowerRate',
                              'ProsperScore',
                              'ListingCategory..numeric.',
                              'Occupation',
                              'EmploymentStatus',
                              'EmploymentStatusDuration',
                              'StatedMonthlyIncome',
                              'LoanOriginalAmount',
                              'LoanOriginationDate',
                              'MonthlyLoanPayment')
            )
     )
```


```{r echo=FALSE, Univariate_Plots}
# Colunas e tipos de dados
str(dff)
```

```{r echo=FALSE, Univariate_Plots}
# Resumo estatístico
summary(dff)
```

```{r echo=FALSE, Univariate_Plots}
# Histograma básico das colunas (1 à 7)
dff[0:7] %>%
  keep(is.numeric) %>%
  gather() %>%
  ggplot(aes(value)) +
    facet_wrap(~key, scales = 'free', ncol = 1) +
    geom_histogram()
```

```{r echo=FALSE, Univariate_Plots}
# Histograma básico das colunas (8 à 14)
dff[8:14] %>%
  keep(is.numeric) %>%
  gather() %>%
  ggplot(aes(value)) +
    facet_wrap(~key, scales = 'free', ncol = 1) +
    geom_histogram()
```

```{r echo=FALSE, Univariate_Plots}
# Distribuição dos dados da coluna LoanOriginalAmount
g <- ggplot(df, aes(x = LoanOriginalAmount)) +
  scale_x_continuous(breaks = seq(0, max(df$LoanOriginalAmount), 5000))
g1 <- g + geom_histogram(binwidth = 1000)
g2 <- g + geom_histogram(binwidth = 500)
g3 <- g + geom_histogram(binwidth = 250)
grid.arrange(g1, g2, g3, ncol = 1)
```

```{r echo=FALSE, Univariate_Plots}
# Verificando que plotagem da renda mensal está enviesada por conta de outlier
summary(dff$StatedMonthlyIncome)
```

```{r echo=FALSE, Univariate_Plots}
# Visualizando as 10 maiores rendas declaradas
sort(tail(sort(dff$StatedMonthlyIncome), 10), decreasing = T)
```

```{r echo=FALSE, Univariate_Plots}
# Plotagem removendo 0.5% das maiores rendas
ggplot(dff, aes(x = StatedMonthlyIncome)) +
  geom_histogram(binwidth = 250) +
  scale_x_continuous(limits = c(0, quantile(dff$StatedMonthlyIncome, .995)))
```

```{r echo=FALSE, Univariate_Plots}
# Plotagem removendo 5% das maiores rendas
ggplot(dff, aes(x = StatedMonthlyIncome)) +
  geom_histogram(binwidth = 250, color = 'black') +
  scale_x_continuous(limits = c(0, quantile(dff$StatedMonthlyIncome, .95)),
                     breaks = seq(0, 12500, 1000))
```

# Análise Univariada

### Qual é a estrutura do conjunto de dados?

### Quais são os principais atributos de interesse deste conjunto de dados?

### Quais outros atributos você acha que podem lhe auxiliar na investigação destes atributos de interesse?

### Você criou novas variáveis a partir dos atributos existentes no conjunto de dados?

### Dos atributos investigados, distribuições incomuns foram encontradas? Você aplicou operações nos dados para limpá-los, ajustá-los ou mudar a forma dos dados? Se sim, por quê?



# Seção de Gráficos Bivariados
```{r echo=FALSE, Bivariate_Plots}

```

# Análise Bivariada

### Discuta sobre alguns dos relacionamentos observados nesta parte da investigação. Como os atributos de interesse variaram no conjunto de dados?

### Você observou algum relacionamento interessante entre os outros atributos (os que não são de interesse)?

### Qual foi o relacionamento mais forte encontrado?




# Seção de Gráficos Multivariados

```{r echo=FALSE, Multivariate_Plots}

```

# Análise Multivariada

### Discuta sobre os relacionamentos observados nesta parte da investigaÃ§Ã£o. Quais atributos que fortaleceram os demais na observação das variáveis de interesse?

### Interações surpreendentes e/ou interessantes foram encontradas entre os atributos?

### OPCIONAL: Modelos foram criados usando este conjunto de dados? Discuta sobre os pontos fortes e as limitações do seu modelo.

------

# Gráficos Finais e Sumário

### Primeiro Gráfico
```{r echo=FALSE, Plot_One}

```

### Descrição do Primeiro Gráfico


### Segundo Gráfico
```{r echo=FALSE, Plot_Two}

```

### Descrição do Segundo Gráfico


### Terceiro Gráfico
```{r echo=FALSE, Plot_Three}

```

### Descrição do Terceiro Gráfico

------

# Reflexão


